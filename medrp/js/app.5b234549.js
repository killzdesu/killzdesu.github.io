(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/medrp/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("SearchBox",{on:{search:t.onSearch}}),t.loading?a("section",{staticClass:"columns"},[t._m(0)]):t._e(),0==t.loading?a("section",[a("ResultList",{attrs:{resultList:t.resultList}})],1):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box column is-half is-offset-one-quarter"},[a("strong",[t._v("Loading...")])])}],r=a("1da1"),o=(a("96cf"),a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("841c"),a("ac1f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns block"},[t._m(0),a("div",{staticClass:"column is-half"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"input",attrs:{type:"text",placeholder:"search here"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),a("div",{staticClass:"column is-one-quarter"},[a("button",{staticClass:"button is-primary",attrs:{id:"go-btn"},on:{click:function(e){return t.$emit("search",t.searchText)}}},[t._v(" GO ")])])])}),c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column is-one-quarter"},[a("span",{staticClass:"has-text-weight-bold is-size-4"},[t._v(" Search: ")])])}],l={name:"SearchBox",data:function(){return{searchText:""}}},u=l,d=a("2877"),f=Object(d["a"])(u,o,c,!1,null,null,null),h=f.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.nameList,(function(t){return a("div",{key:t.id,staticClass:"columns block m-2"},[a("ResultItem",{attrs:{type:t.type,data:t.data,id:t.id}})],1)})),0)},m=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box column is-half is-offset-one-quarter"},[t._v(" "+t._s(t.data.ITEM_NAME)+" "),"nutrition"==t.type?a("span",{staticClass:"m-1"},[a("button",{staticClass:"is-small button is-link is-rounded is-light",on:{click:t.showModal}},[t._v("Info")])]):t._e(),a("Badge",{attrs:{type:t.type}}),"nutrition"==t.type?a("InfoModal",{attrs:{activated:t.activated,type:t.type,info:t.data},on:{"hide-modal":t.hideModal}}):t._e()],1)},_=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon-text ml-4"},["drug"==t.type?a("span",{},[t._m(0),a("span",{staticClass:"tag is-link ml-1"},[t._v(" Drug ")])]):t._e(),"nutrition"==this.type?a("span",[t._m(1),a("span",{staticClass:"tag is-success ml-1"},[t._v(" Nutrition ")])]):t._e()])},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon has-text-link"},[a("i",{staticClass:"fas fa-pills"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon has-text-success"},[a("i",{staticClass:"fas fa-utensils"})])}],C={name:"Badge",props:["type"],computed:{},data:function(){return{}}},y=C,x=Object(d["a"])(y,b,g,!1,null,null,null),k=x.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.modalClass},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[t.info?a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.info.ITEM_NAME))]):t._e(),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return t.$emit("hide-modal")}}})]),a("section",{staticClass:"modal-card-body"},["nutrition"==t.type?a("div",[a("table",{staticClass:"table is-bordered is-striped is-narrow is-hoverable",staticStyle:{width:"100%"}},[t._m(0),a("tbody",t._l(t.processedInfo,(function(e,n){return a("tr",{key:n},[a("td",{class:t.colorClass(e,n)},[a("strong",[t._v(t._s(t.formatTitle(n)))])]),a("td",[t._v(t._s(e[0]))]),a("td",[t._v(t._s(e[1]))])])})),0)])]):t._e()]),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",on:{click:function(e){return t.$emit("hide-modal")}}},[t._v("Close")])])])])},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("colgroup",[a("col",{staticStyle:{width:"20%"},attrs:{span:"1"}}),a("col",{staticStyle:{width:"35%"},attrs:{span:"1"}}),a("col",{staticStyle:{width:"20%"},attrs:{span:"1"}})])}],E=(a("1276"),a("fb6a"),a("caad"),a("2532"),{name:"InfoModal",props:["type","info","activated","hideModal"],data:function(){return{isActivate:!1}},mounted:function(){this.isActivate=this.activated||!1},computed:{modalClass:function(){return{modal:!0,"is-active":this.activated}},processedInfo:function(){var t={};return t.name=[this.info.ITEM_NAME],t.type=[this.info.TYPE],t.subtype=[this.info.SUBTYPE],this.info.FORM&&(t.form=[this.info.FORM]),t.protein=[this.info.PROT,"gm/1000kCal"],t.fat=[this.info.FAT,"gm/1000kCal"],t.carb=[this.info.CARB,"gm/1000kCal"],t.Na=[this.info.Na,"mg/1000kCal"],t.K=[this.info.K,"mg/1000kCal"],t.Cl=[this.info.Cl,"mg/1000kCal"],t.Ca=[this.info.Ca,"mg/1000kCal"],t.P=[this.info.P,"mg/1000kCal"],t.Mg=[this.info.Mg,"mg/1000kCal"],this.info.FLAVOUR&&(t.flavour=[this.info.FLAVOUR]),"EN"==this.Route?(t.conc=[this.info.CONC,"kCal/mL"],t.osmolarity=[this.info.OSM,"mOsm/kg"]):(t.conc=[this.info.CONC,"kCal/bag"],t.volume=this.info.PREP.split(" ")),t.price=[this.info.Price,"Baht"],t}},methods:{formatTitle:function(t){return t=t.charAt(0).toUpperCase()+t.slice(1),t},colorClass:function(t,e){var a={};return 2==t.length&&t[1].includes("gm")&&(a["has-background-success"]=!0,a["has-text-white"]=!0),2==t.length&&t[1].includes("mg")&&(a["has-background-warning"]=!0,a["has-text-white"]=!0),"price"==e&&(a["has-background-danger"]=!0,a["has-text-white"]=!0),a}}}),M=E,T=Object(d["a"])(M,w,O,!1,null,null,null),P=T.exports,S={name:"ResultItem",components:{Badge:k,InfoModal:P},props:["type","data","id"],data:function(){return{activated:!1}},methods:{hideModal:function(){this.activated=!1},showModal:function(){this.activated=!0}}},j=S,L=Object(d["a"])(j,v,_,!1,null,null,null),R=L.exports,$={name:"ResultList",props:["resultList"],components:{ResultItem:R},data:function(){return{}},methods:{},computed:{nameList:function(){var t=[];for(var e in this.resultList)t.push(this.resultList[e]);return t}}},I=$,A=Object(d["a"])(I,p,m,!1,null,null,null),N=A.exports,B=a("bc3a"),U=a.n(B),F={name:"App",components:{SearchBox:h,ResultList:N},data:function(){return{searchKeyword:"",resultList:{},loading:null,errored:!1}},methods:{fetchData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="https://us-central1-med-red-panda.cloudfunctions.net/fetch_search_medrp",U.a,a=new URLSearchParams(window.location.search),n={keyword:this.searchKeyword},a.has("med")&&(n.med=!0),t.next=7,fetch(e+"?"+new URLSearchParams(n),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});case 7:if(s=t.sent,!s||!s.ok){t.next=15;break}return t.next=11,s.json();case 11:this.resultList=t.sent,this.loading=!1,t.next=17;break;case 15:console.log("HTTP-Error: "+s.status),this.errored=!0;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSearch:function(t){this.loading=!0,this.searchKeyword=t,this.fetchData(t)}}},K=F,q=(a("034f"),Object(d["a"])(K,s,i,!1,null,null,null)),D=q.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(D)}}).$mount("#app")},"85ec":function(t,e,a){}});
//# sourceMappingURL=app.5b234549.js.map